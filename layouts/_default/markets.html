{{ define "head" }}
<link rel="stylesheet" href="/css/style-guide.css">
<link rel="stylesheet" href="/css/markets.css">
{{ end }}

{{ define "content" }}
<div class="panels">
  <article class="paper story-body" style="padding: 15px 0;">
    <h2>{{ .Title }}</h2>
    {{ .Content }}

    <!-- Loop through the markets in the data folder -->
    {{ range sort $.Site.Data.markets "city" }}
    <div class="story-module">
      <h1 class="market-name" id="{{.name | urlize}}">{{.name}}</h1>
      <a class="market-url" href="{{.url}}">{{.url}}</a>
      
      <!-- kick out the colors -->
      {{ with .colors }}
      <div class="grid">
        {{ range . }}
        <div class="package swatch">
          <svg style="fill: #{{.hex}}" width="100" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"/></svg>
          <p class="summary">{{.name}}<br>{{.hex}}<br>{{.rgb}}</p>
        </div>
        {{ end }}
      </div>
      {{ end }}

      <!-- list the files -->
      {{ $folder := printf "%s/*" (.city | lower) }}
      {{ with $.Resources.Match $folder }}
      <div class="grid logos">
        {{ range . }}
        <div class="package">
          <h6 class="bold">{{ .MediaType.SubType | upper }}</h6>

          {{ if eq .ResourceType "image" }}
          <a href="{{ .Permalink }}" download><img class="download" src="{{ .Permalink }}"></a>
          {{ else }}
          <a class="button ghost" href="{{ .Permalink }}" download>Download all logos</a>
          {{ end }}
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
           
    <!-- end data range -->
    {{ end }}
  </article>

  <div class="paper digest list">
    <div class="label">
      <h5>MARKETS</h5>
    </div>

    {{ range sort $.Site.Data.markets "city" }}
    <div class="package">
      <h6>{{.city}}, {{.state}}</h6>
      <h4 class="sans bold">
        <a href="#{{.name | urlize}}">{{.name}}</a>
      </h4>
    </div>
    {{ end }}
  </div>
{{ end }}
